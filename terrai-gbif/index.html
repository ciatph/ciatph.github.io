
<!DOCTYPE html>
<html>
<head>
	
	<title>Terrai - GBIF Demo</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==" crossorigin=""></script>
    <script src="js/legend.js" type="text/javascript"></script>

    <style type="text/css">
        body, html {
            margin: 0px;
        }

        .info-legend {
            background-color: rgba(255, 255, 255, 0.5);
            padding: 10px;
        }        

        .circle {
            width: 5px;
            height: 5px;
        }

        @media (min-width: 768px) {
            html {
                font-size: 16px;
            }
        }

        .maparea {
            padding: 0px;
            margin: 0px;
            position: relative;
            margin-top: 70px;
        }

        .border-top { border-top: 1px solid #e5e5e5; }
        .border-bottom { border-bottom: 1px solid #e5e5e5; }

        .box-shadow { box-shadow: 0 .25rem .75rem rgba(0, 0, 0, .05); }        
    </style>
</head>
<body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" id="nav">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMenu" aria-controls="navbarMenu" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
      
            <div class="collapse navbar-collapse" id="navbarMenu">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                  <a class="nav-link" href="#"><h3>Latin America</h3> <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#"><h3>Asia</h3></a>
                </li>
              </ul>
            </div>
          </nav>
          
    <!-- Page Content -->
    <div class="col-md-12 maparea">
            <div id="mapid" style="width: 100%; height:100%; "></div>
        </div>


<script>
    var layerToggle;
    var map;

    window.onload = function(){
        // set window fullscreen height
        var mapDom = document.getElementById('mapid');
        mapDom.style.height = window.innerHeight + 'px';

        var baseUrl = 'http://terrai-gbif.azurewebsites.net';
        // var baseUrl = 'http://localhost:8080';

        // add OpenStreetMap basemap
        var basemap = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        });

        var latin_base = L.tileLayer.wms(baseUrl + '/geoserver/terrai-gbif/wcs?', {
            layers: 'terrai-gbif:latin_terra_I_resamp_fromedit',
            format: 'image/png',
            transparent: true,
            attribution: 'Latin America Basemap',
            styles: 'terrai-base'
        });

        var p_andina_add = L.tileLayer.wms(baseUrl + '/geoserver/terrai-gbif/wcs?', {
            layers: 'terrai-gbif:p_andina_add',
            format: 'image/png',
            transparent: true,
            attribution: 'Prumnopitys Andina Add',
            styles: 'terrai-species'
        });

        var p_andina = L.tileLayer.wms(baseUrl + '/geoserver/terrai-gbif/wcs?', {
            layers: 'terrai-gbif:p_andina',
            format: 'image/png',
            transparent: true,
            attribution: 'Prumnopitys Andina',
            styles: 'terrai-species'
        });    

        var p_uviferum_add = L.tileLayer.wms(baseUrl + '/geoserver/terrai-gbif/wcs?', {
            layers: 'terrai-gbif:p_uviferum_add',
            format: 'image/png',
            transparent: true,
            attribution: 'Pilgerodendron Uviferum Add',
            styles: 'terrai-species-3'
        });       

        var pilgerodendron_uviferum = L.tileLayer.wms(baseUrl + '/geoserver/terrai-gbif/wcs?', {
            layers: 'terrai-gbif:pilgerodendron_uviferum',
            format: 'image/png',
            transparent: true,
            attribution: 'Pilgerodendron Uviferum',
            styles: 'terrai-species-3'
        });       

        var p_salignus_add = L.tileLayer.wms(baseUrl + '/geoserver/terrai-gbif/wcs?', {
            layers: 'terrai-gbif:p_salignus_add',
            format: 'image/png',
            transparent: true,
            attribution: 'Podocarpus Salignus',
            styles: 'terrai-species-2'
        });      

        var podocarpus_salignus = L.tileLayer.wms(baseUrl + '/geoserver/terrai-gbif/wcs?', {
            layers: 'terrai-gbif:podocarpus_salignus',
            format: 'image/png',
            transparent: true,
            attribution: 'Podocarpus Salignus',
            styles: 'terrai-species-2'
        });    
        
        map = L.map('mapid', {
            center: [-26.11598592533351, -81.91406250000001],
            zoom: 4,
            layers: [basemap]
        });    

        var baseMaps = {
            "Latin America Base Map": basemap
        };

        var overlayMaps = {
            "Terra-i Deforestation Detection": latin_base,
            "Prumnopitys Andina": p_andina,
            "Pilgerodendron Uviferum": pilgerodendron_uviferum,
            "Podocarpus Salignus": podocarpus_salignus,
            "Prumnopitys Andina Add": p_andina_add,
            "Pilgerodendron Uviferum Add": p_uviferum_add,
            "Podocarpus Salignus Add": p_salignus_add
        };    

        layerToggle = L.control.layers(baseMaps, overlayMaps).addTo(map);
        L.control.scale().addTo(map);

        l = createLegend();
        l.addTo(map);
    };

</script>


<script src="js/jquery-3.3.1.slim.min.js" type="text/javascript"></script>
<script src="js/bootstrap.min.js" type="text/javascript"></script>

</body>
</html>
